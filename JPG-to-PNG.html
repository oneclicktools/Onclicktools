<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JPG to PNG Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .drop-zone {
            border: 2px dashed #cbd5e1;
            border-radius: 0.75rem;
            transition: all 0.3s;
        }
        .drop-zone.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        #previewContainer {
            transition: all 0.3s;
        }
        .fade-in {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col">
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-3xl font-bold text-center text-indigo-700">
                <i class="fas fa-image mr-3"></i>JPG to PNG Converter
            </h1>
            <p class="text-center text-gray-600 mt-2">Convert your JPG images to PNG format quickly and easily</p>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Upload Section -->
            <div class="p-6 border-b border-gray-200">
                <div id="uploadSection">
                    <div class="drop-zone p-8 text-center cursor-pointer" id="dropZone">
                        <div class="py-8">
                            <i class="fas fa-cloud-upload-alt text-5xl text-indigo-500 mb-4"></i>
                            <h2 class="text-xl font-semibold text-gray-700">Drag & Drop your JPG image here</h2>
                            <p class="text-gray-500 mt-2">or</p>
                            <label for="fileInput" class="mt-4 px-6 py-2 bg-indigo-600 text-white rounded-lg inline-block cursor-pointer hover:bg-indigo-700 transition">
                                <i class="fas fa-folder-open mr-2"></i>Browse Files
                            </label>
                            <input type="file" id="fileInput" accept=".jpg,.jpeg" class="hidden">
                        </div>
                    </div>
                    <p class="text-sm text-gray-500 text-center mt-4">Supported formats: JPG, JPEG. Max file size: 5MB</p>
                </div>
            </div>

            <!-- Preview Section -->
            <div id="previewSection" class="hidden">
                <div class="p-6 border-b border-gray-200">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Preview</h2>
                    <div class="flex flex-col md:flex-row gap-6">
                        <div class="flex-1">
                            <h3 class="text-lg text-gray-600 mb-2">Original JPG</h3>
                            <div class="border rounded-lg overflow-hidden">
                                <img id="originalPreview" class="w-full h-auto max-h-64 object-contain" src="" alt="Original JPG">
                            </div>
                            <p id="originalInfo" class="text-sm text-gray-500 mt-2 text-center"></p>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg text-gray-600 mb-2">Converted PNG</h3>
                            <div class="border rounded-lg overflow-hidden">
                                <canvas id="convertedPreview" class="w-full h-auto max-h-64 object-contain"></canvas>
                            </div>
                            <p id="convertedInfo" class="text-sm text-gray-500 mt-2 text-center"></p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="p-6 flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="convertBtn" class="px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition flex items-center justify-center">
                        <i class="fas fa-sync-alt mr-2"></i>Convert to PNG
                    </button>
                    <button id="downloadBtn" class="px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition flex items-center justify-center" disabled>
                        <i class="fas fa-download mr-2"></i>Download PNG
                    </button>
                    <button id="resetBtn" class="px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition flex items-center justify-center">
                        <i class="fas fa-redo mr-2"></i>Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="max-w-3xl mx-auto mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-xl shadow text-center">
                <div class="text-indigo-500 text-3xl mb-4">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3 class="text-lg font-semibold mb-2">Fast Conversion</h3>
                <p class="text-gray-600">Convert your images in seconds with our optimized conversion algorithm.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow text-center">
                <div class="text-indigo-500 text-3xl mb-4">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3 class="text-lg font-semibold mb-2">Privacy First</h3>
                <p class="text-gray-600">Your images are processed entirely in your browser - no server uploads needed.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow text-center">
                <div class="text-indigo-500 text-3xl mb-4">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3 class="text-lg font-semibold mb-2">Responsive Design</h3>
                <p class="text-gray-600">Works perfectly on all devices - desktop, tablet, and mobile.</p>
            </div>
        </div>
    </main>

    <footer class="bg-white mt-12 py-6 border-t border-gray-200">
        <div class="container mx-auto px-4 text-center text-gray-600">
            <p>© 2023 JPG to PNG Converter. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const uploadSection = document.getElementById('uploadSection');
            const previewSection = document.getElementById('previewSection');
            const originalPreview = document.getElementById('originalPreview');
            const convertedPreview = document.getElementById('convertedPreview');
            const convertBtn = document.getElementById('convertBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const resetBtn = document.getElementById('resetBtn');
            const originalInfo = document.getElementById('originalInfo');
            const convertedInfo = document.getElementById('convertedInfo');
            
            let originalImage = null;
            let convertedImageData = null;
            
            // Canvas context
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Event Listeners
            dropZone.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', handleFileSelect);
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('dragover');
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            convertBtn.addEventListener('click', convertImage);
            
            downloadBtn.addEventListener('click', downloadImage);
            
            resetBtn.addEventListener('click', resetConverter);
            
            function handleFileSelect(e) {
                if (e.target.files.length) {
                    handleFile(e.target.files[0]);
                }
            }
            
            function handleFile(file) {
                // Check if file is JPG
                if (!file.type.match('image/jpeg')) {
                    alert('Please select a JPG or JPEG image.');
                    return;
                }
                
                // Check file size (5MB max)
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size exceeds 5MB. Please choose a smaller image.');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    originalImage = new Image();
                    originalImage.onload = function() {
                        // Display original image info
                        originalInfo.textContent = `${originalImage.width} × ${originalImage.height} pixels · ${formatFileSize(file.size)}`;
                        
                        // Show preview
                        originalPreview.src = e.target.result;
                        uploadSection.classList.add('hidden');
                        previewSection.classList.remove('hidden');
                        previewSection.classList.add('fade-in');
                        
                        // Reset conversion state
                        downloadBtn.disabled = true;
                        convertedInfo.textContent = '';
                    };
                    originalImage.src = e.target.result;
                };
                
                reader.readAsDataURL(file);
            }
            
            function convertImage() {
                if (!originalImage) return;
                
                // Set canvas dimensions
                canvas.width = originalImage.width;
                canvas.height = originalImage.height;
                
                // Draw image on canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(originalImage, 0, 0);
                
                // Get PNG data
                try {
                    convertedImageData = canvas.toDataURL('image/png');
                    
                    // Display converted preview
                    const convertedImg = new Image();
                    convertedImg.onload = function() {
                        const convertedCtx = convertedPreview.getContext('2d');
                        convertedPreview.width = convertedImg.width;
                        convertedPreview.height = convertedImg.height;
                        convertedCtx.clearRect(0, 0, convertedPreview.width, convertedPreview.height);
                        convertedCtx.drawImage(convertedImg, 0, 0);
                        
                        // Calculate approximate file size
                        const base64 = convertedImageData.split(',')[1];
                        const binaryLength = window.atob(base64).length;
                        convertedInfo.textContent = `${convertedImg.width} × ${convertedImg.height} pixels · ${formatFileSize(binaryLength)}`;
                    };
                    convertedImg.src = convertedImageData;
                    
                    // Enable download button
                    downloadBtn.disabled = false;
                    
                    // Show success message
                    showNotification('Conversion successful!', 'success');
                } catch (error) {
                    showNotification('Conversion failed. Please try again.', 'error');
                    console.error('Conversion error:', error);
                }
            }
            
            function downloadImage() {
                if (!convertedImageData) return;
                
                const link = document.createElement('a');
                link.href = convertedImageData;
                link.download = 'converted-image.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('Download started!', 'success');
            }
            
            function resetConverter() {
                // Reset UI
                uploadSection.classList.remove('hidden');
                previewSection.classList.add('hidden');
                fileInput.value = '';
                
                // Reset data
                originalImage = null;
                convertedImageData = null;
                
                // Clear previews
                originalPreview.src = '';
                const convertedCtx = convertedPreview.getContext('2d');
                convertedCtx.clearRect(0, 0, convertedPreview.width, convertedPreview.height);
                
                showNotification('Converter reset. Upload a new image.', 'info');
            }
            
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' bytes';
                else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
                else return (bytes / 1048576).toFixed(1) + ' MB';
            }
            
            function showNotification(message, type) {
                // Remove existing notification
                const existingNotification = document.querySelector('.notification');
                if (existingNotification) {
                    existingNotification.remove();
                }
                
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `notification fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg text-white font-medium transition transform duration-300 ${
                    type === 'success' ? 'bg-green-500' : 
                    type === 'error' ? 'bg-red-500' : 'bg-blue-500'
                }`;
                notification.textContent = message;
                
                // Add to document
                document.body.appendChild(notification);
                
                // Animate in
                setTimeout(() => {
                    notification.classList.add('translate-x-0', 'opacity-100');
                }, 10);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('opacity-100');
                    notification.classList.add('opacity-0');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>